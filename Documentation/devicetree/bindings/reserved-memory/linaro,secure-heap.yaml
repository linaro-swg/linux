# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/reserved-memory/linaro,secure-heap.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Linaro Secure DMABUF Heap

maintainers:
  - Olivier Masse <olivier.masse@nxp.com>

description:
  Linaro OP-TEE firmware needs a reserved memory for the
  Secure Data Path feature (aka SDP).
  The purpose is to provide a secure memory heap which allow
  non-secure OS to allocate/free secure buffers.
  The TEE is reponsible for protecting the SDP memory buffers.
  TEE Trusted Application can access secure memory references
  provided as parameters (DMABUF file descriptor).

allOf:
  - $ref: "reserved-memory.yaml"

properties:
  compatible:
    const: linaro,secure-heap

  reg:
    description:
      Region of memory reserved for OP-TEE SDP feature

  no-map:
    $ref: /schemas/types.yaml#/definitions/flag
    description:
      Avoid creating a virtual mapping of the region as part of the OS'
      standard mapping of system memory.

unevaluatedProperties: false

required:
  - compatible
  - reg
  - no-map

examples:
  - |
  reserved-memory {
    #address-cells = <2>;
    #size-cells = <2>;

    sdp@3e800000 {
      compatible = "linaro,secure-heap";
      no-map;
      reg = <0 0x3E800000 0 0x00400000>;
    };
  };
